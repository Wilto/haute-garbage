---
layout: layouts/base.njk
templateClass: tmpl-post
---

{% macro respimg(path, img, sizes, alt, capt) %}
<img 
	sizes="{{ sizes }}"
	srcset="
		{{ path }}{{ img }}-1.jpg 320w,
		{{ path }}{{ img }}-2.jpg 450w,
		{{ path }}{{ img }}-3.jpg 640w,
		{{ path }}{{ img }}-4.jpg 820w,
		{{ path }}{{ img }}-5.jpg 1024w"
	src="{{ path }}{{ img }}-4.jpg" 
	{% if capt %}
	aria-describedby="capt-1"
	{% endif %}
	alt="{{ alt }}">
{% endmacro %}

<div class="col" itemscope itemtype="http://schema.org/Recipe">
	<div class="intro">
		<header role="banner" class="recipeheader">
			{% for tag in tags %}
				<a href="/recipes/tagged/{{ tag }}" class="art-section"><span class="a11y-only">Category: </span>{{ tag }}</a>
			{% endfor %}
			<h2 class="recipe-hed" itemprop="name">{{ title }}</h2>

			<dl class="meta">
				{% if meta.serves %}
				<dt>Serves</dt>
				<dd itemprop="recipeYield">{{meta.serves}}</dd>
				{% endif %}
				{% if meta.active %}
				<dt>Active Time</dt>
				<dd itemprop="cookTime">{{meta.active}}</dd>
				{% endif %}
				{% if meta.total %}
				<dt>Total Time</dt>
				<dd itemprop="totalTime">{{meta.total}}</dd>
				{% endif %}
			</dl>
		</header>

		<div class="recipe-wrapper">

		{% if img %}
		<figure class="feat-thumb">
			{{ respimg('/img/', img, '(min-width: 560px) 38vw, 100vw', alt, capt ) }}
			{% if capt %}
			<figcaption id="capt-1" class="caption">
				{{capt}}
			</figcaption>
			{% endif %}
		</figure>
		{% endif %}

		{% if video %}
		<figure class="feat-thumb" aria-describedby="pagevid">
			<video controls>
				<source src="/_assets/media/{{video}}.mp4" type="video/mp4">
				<track kind="captions" src="/_assets/media/{{video}}.vtt">
				Sorry, Iâ€™m having trouble loading this video.
			</video>
			{% if capt %}
			<figcaption id="pagevid" class="caption">
				{{capt}}
			</figcaption>
			{% endif %}
		</figure>
		{% endif %}

		{% if lede %}
		<p class="lede" itemprop="description">{{ lede | safe }}</p>
		{% endif %}

		{{ layoutContent | safe }}

	</div>

	<h3 class="article-hed" id="recipe-jump">{{ title }}</h3>
{% if ingredients %}
	<p>{{ notes }}
{% endif %}
{% if ingredients %}
	<h4 class="inline-hed" id="recipe-sub0">Ingredients</h4>
	<ul class="ingredients" aria-labelledby="recipe-sub0">
		{%- for ing in ingredients -%}
		<li itemprop="ingredients">
			<p><span class="amt">{{ing.amt.whole}}<b class="frac" role="presentation">{{ing.amt.frac}}</b> {% if ing.amt.measure.abbr %}<abbr title="{{ing.amt.measure.full}}" role="presentation">{{ing.amt.measure.abbr}}</abbr>{% else %}{{ing.amt.measure}}{% endif %}</span>
			{% if ing.href %}<a href="{{ ing.href }}">{% endif %}{{ing.name}}{% if ing.href %}</a>{% endif %}{% if ing.notes %},&nbsp;{% if ing.notehref %}<a href="{{ing.notehref}}">{%- endif -%}{{ing.notes}}{% if ing.notehref %}</a>{%- endif -%}{%- endif -%}</p>
			{% if ing.optional %}<span class="opt">Optional</span>{%- endif -%}
		</li>
		{%- endfor -%}
	</ul>
{% endif %}
{% if instructions %}
		<div class="instructions">
			<h4 class="inline-hed">Instructions</h4>

		{% if instructions[0].stage %}
			{%- for ins in instructions -%}
			<h4 class="recipe-subhed"><span class="a11y-only">Instructions </span>for the {{ins.stage}}</h4>
			<ol class="steps">
				{%- for step in ins.steps -%}
				<li><p>{{step}}</p></li>
				{%- endfor -%}
			</ol>
			{%- endfor -%}
		{% else %}
			<ol class="steps">
				{%- for ins in instructions -%}
				<li><p>{{ins | safe }}</p></li>
				{%- endfor -%}
			</ol>
		{% endif %}
		</div>
	{% endif %}

	</div>
</div>